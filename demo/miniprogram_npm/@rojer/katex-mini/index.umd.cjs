(function(c,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("katex")):typeof define=="function"&&define.amd?define(["exports","katex"],l):(c=typeof globalThis<"u"?globalThis:c||self,l(c.KatexMini={},c.katex))})(this,function(c,l){"use strict";const d=/([A-Z])/g,y=function(n){return n.replace(d,"-$1").toLowerCase()},b={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},x=/[&><"']/g;function h(n){return String(n).replace(x,t=>b[t])}const _=n=>"data:image/svg+xml,"+encodeURIComponent(n.replace(/\s+/g," ")),w=(n,t,e)=>{let r=!1;t.classes&&t.classes.length>0&&(r=!0);const i=h(o(t.classes));let a="";n==="text"&&t.italic>0&&(a+="margin-right:"+t.italic+"em;");for(const s in t.style)t.style.hasOwnProperty(s)&&(a+=`${y(s)}:${t.style[s]};`);a&&(r=!0);for(const s in t.attributes)t.attributes.hasOwnProperty(s)&&h(t.attributes[s]);if(n==="span")return{name:"span",attrs:{class:i+" katex-span",style:a},children:e};if(n==="img")return{name:"img",attrs:{class:i+" katex-img",style:a},children:e};if(n==="text"){const s=h(t.text);return r?{name:"span",attrs:{class:i,style:a},children:[{type:"text",text:s}]}:{type:"text",text:s}}if(n==="svg"){const s=t.toMarkup();return{name:"img",attrs:{src:_(s),class:"katex-svg"}}}return null},o=function(n){return(n==null?void 0:n.filter(t=>t).join(" "))??""},p=(n,t)=>n.map(e=>{var s;let r=t;(s=e==null?void 0:e.style)!=null&&s.color&&(r=e.style.color);let i;e instanceof l.__domTree.Span&&(i="span"),e instanceof l.__domTree.Anchor&&(i="anchor"),e instanceof l.__domTree.LineNode&&(i="line"),e instanceof l.__domTree.PathNode&&(i="path"),e instanceof l.__domTree.SvgNode&&(i="svg",r&&(e.attributes.fill=r)),e instanceof l.__domTree.SymbolNode&&(i="text");const a=e.children&&e.children.length>0?p(e.children,r):[];return i?w(i,e,a):a}).reduce((e,r)=>(Array.isArray(r)?e.push(...r):e.push(r),e),[]).filter(e=>!!e),g=(n,t={})=>{const{throwError:e,...r}=t||{};try{const i=l.__renderToDomTree(n,{...r,output:"html"});return p([i])}catch(i){if(e)throw i;return[{name:"span",attrs:{style:"color:red;"},children:[{type:"text",text:i.message}]}]}},T=function(n,t,e){let r=e,i=0;const a=n.length;for(;r<t.length;){const s=t[r];if(i<=0&&t.slice(r,r+a)===n)return r;s==="\\"?r++:s==="{"?i++:s==="}"&&i--,r++}return-1},v=function(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},E=/^\\begin{/,P=function(n,t){let e;const r=[],i=new RegExp("("+t.map(a=>v(a.left)).join("|")+")");for(;e=n.search(i),e!==-1;){e>0&&(r.push({type:"text",data:n.slice(0,e)}),n=n.slice(e));const a=t.findIndex(f=>n.startsWith(f.left));if(e=T(t[a].right,n,t[a].left.length),e===-1)break;const s=n.slice(0,e+t[a].right.length),u=E.test(s)?s:n.slice(t[a].left.length,e);r.push({type:"math",data:u,rawData:s,display:t[a].display}),n=n.slice(e+t[a].right.length)}return n!==""&&r.push({type:"text",data:n}),r},M=function(n,t){var i;const e=P(n,(t==null?void 0:t.delimiters)??[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]);if(e.length===1&&e[0].type==="text")return e[0].data;const r=[];for(let a=0;a<e.length;a++)if(e[a].type==="text")r.push({type:"node",name:"span",attrs:{style:"white-space: pre-wrap;"},children:[{type:"text",text:e[a].data}]});else{const s={...t};let u=e[a].data;s.displayMode=e[a].display;try{s.preProcess&&(u=s.preProcess(u));const f=g(u,s);r.push(...f)}catch(f){if(!(f instanceof l.ParseError))throw f;(i=t.errorCallback)==null||i.call(t,"KaTeX auto-render: Failed to parse `"+e[a].data+"` with ",f),r.push(e[a].rawData);continue}}return r};c.createClass=o,c.default=g,c.parseLatex=g,c.renderMathInText=M,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
